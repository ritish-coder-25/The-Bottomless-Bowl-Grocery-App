<!DOCTYPE html>
<html>
    <head>
        <title>Store Manager Dashboard</title>
        <!-- Include your CSS stylesheets and other dependencies here -->

        <!--<script src="https://cdn.jsdelivr.net/npm/vue@2.7.14/dist/vue.js"></script>

        <script src="https://cdn.jsdelivr.net/npm/vue-resource@1.5.1/dist/vue-resource.min.js"></script>

        <script src="https://unpkg.com/vue-router/dist/vue-router.js"></script>-->

        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">

        <script>
            function logout() {
                var token = localStorage.getItem('access_token');

                var xhr = new XMLHttpRequest();

                xhr.open('POST', '/store_manager/logout', true);

                xhr.setRequestHeader('Content-Type', 'application/json');
                xhr.setRequestHeader('Authorization', 'Bearer ' + token);

                xhr.onreadystatechange = function() {
                    if(xhr.readyState === 4) {
                        if (xhr.status === 200) {
                            var response = JSON.parse(xhr.responseText);
                            console.log(response.message);
                            window.location.replace('/');
                        } else {
                            console.log('Logout failed. Handle other cases here');
                        }
                    }
                };

                xhr.send();
            }
        </script>
    </head>
    <body>
        <header>
            <div class="top-bar">
                <a href="javascript:logout()">Log Out</a>
            </div>
            <br>
            <div id='app'>
                <search-bar></search-bar>
            </div>
        </header>

        <div class="container">
            <h1>Welcome, Store Manager!</h1>

            <!-- Dashboard Links -->
            <div class="dashboard-links">
                <ul>
                    <li><a href="/store_manager/manage_products">Manage Products</a></li>
                    <li><a href="/manager/requests">Requests</a></li>
                    <li><a href='/download_sales_report'>Download Report</a></li>
                </ul>
            </div>
        </div>

        <script type="text/javascript" src="/main.js"></script>
    
    </body>
</html>
