<!DOCTYPE html>
<html lang='en'>
	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		
		<title>User Dashboard</title>

		<script src="https://cdn.jsdelivr.net/npm/vue@2.7.14/dist/vue.js"></script>

  		<script src="https://cdn.jsdelivr.net/npm/vue-resource@1.5.1/dist/vue-resource.min.js"></script>

  		<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">

  		<script>
  			function logout() {
  				var token = localStorage.getItem('access_token');

  				var xhr = new XMLHttpRequest();

  				xhr.open('POST', '/user/logout', true);

  				xhr.setRequestHeader('Content-Type', 'application/json');
  				xhr.setRequestHeader('Authorization', 'Bearer ' + token);

  				xhr.onreadystatechange = function() {
  					if(xhr.readyState === 4) {
  						if (xhr.status === 200) {
  							var response = JSON.parse(xhr.responseText);
  							console.log(response.message);
  							window.location.replace('/');
  						} else {
  							console.log('Logout failed. Handle other cases here');
  						}
  					}
  				};

  				xhr.send();
  			}
  		</script>
	</head>
	<header>
		<div class="top-bar">
            <a href="javascript:logout()">Log Out</a>
        </div>
		<br>
		<div id='app'>
            <search-bar></search-bar>
        </div>
	</header>
	<body>
		<h1>User Dashboard</h1>

		<a href='/user/shopping'>Shop for Products</a><br>

		<a href='/user/carts-list'>Purchase History</a><br>
	</body>

    <script type="text/javascript" src="/main.js"></script>
    
</html>